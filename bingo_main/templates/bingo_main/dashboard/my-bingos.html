{% extends 'bingo_main/base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'dashboard/../css/styles.css' %}">
<link rel="stylesheet" href="{% static 'dashboard/css/index.css' %}">
<link rel="stylesheet" href="{% static 'dashboard/css/global.css' %}">
{% endblock css %}

{% block js %}
    <script src="{% static 'dashboard/../js/dropzone.js' %}"></script>
{% endblock js %}

{% block content %}

{% include 'bingo_main/partials/_navbar_top.html' with active_tab='my_bingos' %}

<div class="bingoContainer">
    <div class="bingoBox">
        <div class="bingoTable box3x3">

        </div>
        <div class="bingoTableBottom">
            3x3 Bingo Name
            <div>
                <div class="gameButton">
                    <i class="fa fa-edit"></i>
                </div>
                <div class="gameButton">make game</div>
            </div>
        </div>
    </div>
    <div class="bingoBox">
        <div class="bingoTable box4x4">

        </div>
        <div class="bingoTableBottom">
            4x4 Bingo Name
            <div class="gameButton">make game</div>
        </div>
    </div>
    <div class="bingoBox">
        <div class="bingoTable box5x5">

        </div>
        <div class="bingoTableBottom">
            5x5 Bingo Name
            <div class="gameButton">make game</div>
        </div>
    </div>
</div>

{% endblock content %}

{% block js_bottom %}
<script>
    function openSidebar() {
        let el = document.querySelector('.sidebarProfile');

        if (el.style.display == '') {
            return el.style.display = 'block'
        }

        el.style.display = '';
    }

    function getBingos() {
        // 3x3 Box
        {% if pictures_3x3 %}
            {% for pic in pictures_3x3 %}
                document.querySelector('.box3x3').innerHTML +=
                '<div class="field"><img src="{{ pic.image_file.url }}" alt=""></div>';
            {% endfor %}
        {% else %}
            for (let index = 0; index != 18; index++) {
                document.querySelector('.box3x3').innerHTML +=
                '<div class="field"><img src="{% static 'dashboard/../images/placeholder.png' %}" alt=""></div>';
            }
        {% endif %}

        // 4x4 Box
        {% if pictures_4x4 %}
            {% for pic in pictures_4x4 %}
                document.querySelector('.box4x4').innerHTML +=
                '<div class="field"><img src="{{ pic.image_file.url }}" alt=""></div>';
            {% endfor %}
        {% else %}
            for (let index = 0; index != 32; index++) {
                document.querySelector('.box4x4').innerHTML +=
                    '<div class="field"><img src="{% static 'dashboard/../images/placeholder.png' %}" alt=""></div>';
            }
        {% endif %}

        // 5x5 Box
        {% if pictures_5x5 %}
            {% for pic in pictures_5x5 %}
                document.querySelector('.box5x5').innerHTML +=
                '<div class="field"><img src="{{ pic.image_file.url }}" alt=""></div>';
            {% endfor %}
        {% else %}
            for (let index = 0; index != 54; index++) {
                document.querySelector('.box5x5').innerHTML +=
                    '<div class="field"><img src="{% static 'dashboard/../images/placeholder.png' %}" alt=""></div>';
            }
        {% endif %}

        resizeBox();
    }

    function resizeBox() {
        // 3x3 Box
        let width3x3 = document.querySelector('.box3x3 .field').offsetWidth;
        document.querySelector('.box3x3').style.gridTemplateRows = `repeat(3, ${width3x3}px)`

        // 4x4 Box
        let width4x4 = document.querySelector('.box4x4 .field').offsetWidth;
        document.querySelector('.box4x4').style.gridTemplateRows = `repeat(4, ${width4x4}px)`

        // 5x5 Box
        let width5x5 = document.querySelector('.box5x5 .field').offsetWidth;
        document.querySelector('.box5x5').style.gridTemplateRows = `repeat(6, ${width5x5}px)`

    }

    window.addEventListener('resize', function (e) {
        resizeBox();
    });
    getBingos();
</script>
{% endblock js_bottom %}